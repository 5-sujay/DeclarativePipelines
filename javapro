pipeline {
    agent {label "Agent Java"}
    stages {
     stage('gitinit') {
            steps {
                sh '''
                 
                if [ ! -f .git ] && [ ! -d java-tomcat-maven-example.git ]
                then
                git init
                git clone https://github.com/deesnest/java-tomcat-maven-example.git
                fi
                  
                 '''
             }
        }
        stage('build1') {
            steps {
                sh '''
                 
                  ls -l
                cd java-tomcat-maven-example
                pwd
                mvn install
                if [ ! -d jbuild ]
                then
                mkdir jbuild
                else
                path=$PWD
                cp $path/*.jar $path/jbuild
                echo "Java project Build Successful"
                echo $PWD
                fi
                  
                 '''
             }
        }
        
    }
}
